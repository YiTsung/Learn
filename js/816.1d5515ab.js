"use strict";(self["webpackChunkwork"]=self["webpackChunkwork"]||[]).push([[816],{9816:function(e,s,l){l.r(s),l.d(s,{default:function(){return ie}});var a=l(3396),t=l(7139),r=l(9242);const c=(0,a._)("section",{class:"mt-3"},[(0,a._)("div",{class:"container"},[(0,a._)("div",{class:"row justify-content-center align-items-center position-relative mt-5"},[(0,a._)("div",{class:"col-10"},[(0,a._)("div",{class:"progress mx-3",style:{height:"5px"}},[(0,a._)("div",{class:"progress-bar bg-info",role:"progressbar",style:{width:"50%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})])]),(0,a._)("div",{class:"col-10 d-flex justify-content-between position-absolute top-0 translate-middle-y mt-3"},[(0,a._)("div",{class:"text-center"},[(0,a._)("span",{class:"badge bg-brown rounded-circle p-2",style:{width:"2rem",height:"2rem"}},[(0,a._)("i",{class:"bi bi-basket"})]),(0,a._)("p",{class:"mb-0"},"購物車")]),(0,a._)("div",{class:"text-center"},[(0,a._)("span",{class:"badge bg-brown rounded-circle p-2",style:{width:"2rem",height:"2rem"}},[(0,a._)("i",{class:"bi bi-clipboard-check-fill"})]),(0,a._)("p",{class:"mb-0"},"填寫資料")]),(0,a._)("div",{class:"text-center"},[(0,a._)("span",{class:"badge bg-secondary rounded-circle p-2",style:{width:"2rem",height:"2rem"}},[(0,a._)("i",{class:"bi bi-credit-card-fill"})]),(0,a._)("p",{class:"mb-0"},"付款確認")])])])])],-1),i={class:"my-7"},o={class:"container"},d={class:"row g-3 my-4 flex-lg-row-reverse"},n={class:"col-12 col-lg-6 text-brown"},m={class:"border border-2 p-3 p-md-4"},u={class:"row row-cols-1 g-5"},_={class:"col"},b=(0,a._)("h2",{class:"fs-3"},[(0,a._)("i",{class:"bi bi-c-circle"}),(0,a.Uk)("購物清單")],-1),p={class:"row flex-column g-3 mt-3"},f={class:"card border-0"},h={class:"row"},w={class:"col-md-5"},g=["src","alt"],v={class:"col-md-5"},y={class:"card-body p-0 text-brown"},x={class:"card-title fw-bold"},k={class:"card-text"},V={class:"card-text"},$={class:"col d-flex flex-column justify-content-between"},z={class:"carts-total"},W=(0,a._)("h2",{class:"fs-3"},[(0,a._)("i",{class:"bi bi-c-circle"}),(0,a.Uk)("購物車總計")],-1),C={class:"mt-1 w-100"},U={class:"text-brown"},E={class:"text-end py-2",colspan:"3"},L=(0,a._)("td",{class:"text-end py-2",colspan:"2"},"商品金額",-1),N={class:"text-end w-50"},T=(0,a._)("td",{class:"text-end py-2",colspan:"2"},"運費",-1),j={class:"text-end w-50"},q={class:"text-success"},D=(0,a._)("td",{class:"text-end py-2",colspan:"2"},"優惠折扣",-1),Q={class:"text-end w-50"},A={class:"border-top border-dark"},F=(0,a._)("td",{class:"text-end py-2",colspan:"2"},"總計金額",-1),H={class:"text-end w-50"},M={class:"col-12 col-lg-6 text-brown"},O={class:"border border-2 p-3 p-md-4"},S={class:"row g-5"},Y={class:"col-12"},I=(0,a._)("h2",{class:"fs-3"},[(0,a._)("i",{class:"bi bi-c-circle"}),(0,a.Uk)("收件人資料")],-1),K={class:"col"},Z=(0,a._)("label",{for:"userName",class:"form-label"},"*收件人姓名",-1),B={class:"col"},G=(0,a._)("label",{for:"userEmail",class:"form-label"},"*Email",-1),J={class:"col"},P=(0,a._)("label",{for:"userTel",class:"form-label"},"*收件人電話",-1),R={class:"col"},X=(0,a._)("label",{for:"userAddress",class:"form-label"},"*收件人地址",-1),ee={class:"col"},se=(0,a._)("label",{for:"userMessage",class:"form-label"},"留言",-1),le=(0,a._)("div",{class:"col d-flex justify-content-end"},[(0,a._)("button",{type:"submit",class:"btn btn-primary rounded-3"}," 前往結帳 ")],-1);function ae(e,s,l,ae,te,re){const ce=(0,a.up)("Loading"),ie=(0,a.up)("VField"),oe=(0,a.up)("ErrorMessage"),de=(0,a.up)("VForm");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(ce,{active:te.isLoading},null,8,["active"]),c,(0,a._)("section",i,[(0,a._)("div",o,[(0,a._)("div",d,[(0,a._)("div",n,[(0,a._)("div",m,[(0,a._)("div",u,[(0,a._)("div",_,[b,(0,a._)("div",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(te.carts.carts,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"col-10",key:e.id},[(0,a._)("div",f,[(0,a._)("div",h,[(0,a._)("div",w,[(0,a._)("img",{class:"img-fluid",src:e.product.imageUrl,alt:e.product.title},null,8,g)]),(0,a._)("div",v,[(0,a._)("div",y,[(0,a._)("h4",x,(0,t.zw)(e.product.title),1),(0,a._)("p",k,"數量："+(0,t.zw)(e.qty),1),(0,a._)("p",V,"NT$ "+(0,t.zw)(e.product.price),1)])])])])])))),128))])]),(0,a._)("div",$,[(0,a._)("div",z,[W,(0,a._)("table",C,[(0,a._)("tbody",U,[(0,a._)("tr",null,[(0,a._)("td",E,"共 "+(0,t.zw)(te.cartQty)+" 筆商品",1)]),(0,a._)("tr",null,[L,(0,a._)("td",N,"NT$ "+(0,t.zw)(e.$filters.currency(te.carts.total)),1)]),(0,a._)("tr",null,[T,(0,a._)("td",j,"NT$ "+(0,t.zw)(e.$filters.currency(te.freight)),1)]),(0,a._)("tr",q,[D,(0,a._)("td",Q,"- NT$ "+(0,t.zw)(e.$filters.currency(te.carts.total-te.carts.final_total)),1)]),(0,a._)("tr",A,[F,(0,a._)("td",H,"NT$ "+(0,t.zw)(e.$filters.currency(te.carts.final_total+te.freight)),1)])])])])])])])]),(0,a._)("div",M,[(0,a._)("div",O,[(0,a._)("div",S,[(0,a._)("div",Y,[I,(0,a.Wm)(de,{class:"row flex-column g-3 mt-3",onSubmit:re.createOrder},{default:(0,a.w5)((({errors:e})=>[(0,a._)("div",K,[Z,(0,a.Wm)(ie,{id:"userName",type:"text",name:"姓名",class:(0,t.C_)(["form-control border-brown text-brown",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:te.form.user.name,"onUpdate:modelValue":s[0]||(s[0]=e=>te.form.user.name=e)},null,8,["class","modelValue"]),(0,a.Wm)(oe,{name:"姓名",class:"invalid-feedback"})]),(0,a._)("div",B,[G,(0,a.Wm)(ie,{id:"userEmail",type:"email",name:"Email",class:(0,t.C_)(["form-control border-brown text-brown",{"is-invalid":e["Email"]}]),placeholder:"請輸入Email",rules:"required",modelValue:te.form.user.email,"onUpdate:modelValue":s[1]||(s[1]=e=>te.form.user.email=e)},null,8,["class","modelValue"]),(0,a.Wm)(oe,{name:"Email",class:"invalid-feedback"})]),(0,a._)("div",J,[P,(0,a.Wm)(ie,{id:"userTel",type:"tel",name:"電話",class:(0,t.C_)(["form-control border-brown text-brown",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:te.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=e=>te.form.user.tel=e)},null,8,["class","modelValue"]),(0,a.Wm)(oe,{name:"電話",class:"invalid-feedback"})]),(0,a._)("div",R,[X,(0,a.Wm)(ie,{id:"userAddress",type:"text",name:"地址",class:(0,t.C_)(["form-control border-brown text-brown",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:te.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=e=>te.form.user.address=e)},null,8,["class","modelValue"]),(0,a.Wm)(oe,{name:"地址",class:"invalid-feedback"})]),(0,a._)("div",ee,[se,(0,a.wy)((0,a._)("textarea",{style:{resize:"none"},class:"form-control border-brown text-brown",rows:"5","onUpdate:modelValue":s[4]||(s[4]=e=>te.form.message=e)},null,512),[[r.nr,te.form.message]])]),le])),_:1},8,["onSubmit"])])])])])])])])],64)}l(7658);var te={inject:["emitter"],data(){return{carts:{},cartQty:0,freight:60,form:{user:{name:"",email:"",tel:"",address:""},message:""},isLoading:!1}},methods:{getCart(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/zyt-api/cart";this.$http.get(e).then((e=>{this.isLoading=!1,e.data.success?(this.carts=e.data.data,this.cartQty=e.data.data.carts.length):(this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:e.response.data.message}))}))},createOrder(){this.isLoading=!0;const e=this.form,s="https://vue3-course-api.hexschool.io/api/zyt-api/order";this.$http.post(s,{data:e}).then((e=>{this.isLoading=!1,e.data.success&&(this.$router.push(`/userCheckout/${e.data.orderId}`),this.form={user:{name:"",email:"",tel:"",address:""},message:""})})).catch((e=>{this.emitter.emit("push-message",{style:"danger",title:e.response.data})}))}},created(){this.getCart()}},re=l(89);const ce=(0,re.Z)(te,[["render",ae]]);var ie=ce}}]);
//# sourceMappingURL=816.1d5515ab.js.map