{"version":3,"file":"js/846.65e8ae8d.js","mappings":"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","sources":["webpack://work/./src/mixins/GetCart.js","webpack://work/./src/mixins/GetFavorite.js","webpack://work/./src/views/Front/FavoriteView.vue","webpack://work/./src/views/Front/FavoriteView.vue?1c7b"],"sourcesContent":["export default {\r\n  inject: ['emitter'],\r\n  methods: {\r\n    getCarts () {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http.get(api)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.isLoading = false\r\n            this.cartLength = res.data.data.carts.length\r\n            this.emitter.emit('push-CartNotice', {\r\n              data: this.cartLength\r\n            })\r\n          }\r\n        })\r\n    }\r\n  }\r\n}\r\n","export default {\r\n  methods: {\r\n    getFavorite () {\r\n      if (localStorage.getItem('favoriteItem')) {\r\n        const tempList = localStorage.getItem('favoriteItem')\r\n        this.idList = JSON.parse(tempList)\r\n        this.favoriteLength = this.idList.length\r\n      } else {\r\n        this.idList = []\r\n        this.favoriteLength = 0\r\n      }\r\n      this.emitter.emit('push-FavNotice', {\r\n        data: this.favoriteLength\r\n      })\r\n    }\r\n  }\r\n}\r\n","<template>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n  <section v-if=\"favoriteList.length === 0\"  class=\"text-center my-5 py-5\">\r\n    <h2 class=\"noFavoriteList-title\">尚未收藏任何產品喔!</h2>\r\n    <button type=\"button\" class=\"btn button-light-color mt-2\"\r\n        @click.prevent=\"$router.push('/products')\">來去逛逛\r\n    </button>\r\n  </section>\r\n  <section v-else class=\"mt-5\">\r\n    <div class=\"row\">\r\n        <div class=\"col-sm-12 col-md-6 col-lg-4\" v-for=\"item in favoriteList\" :key=\"item.id\">\r\n          <div class=\"card mt-1 mb-2 mx-auto\">\r\n            <a href=\"#\" @click.prevent=\"getProduct(item.id)\">\r\n              <div class=\"overflow-hidden text-light position-relative border-bottom card-pic\">\r\n                <div class=\"position-absolute bg-secondary px-2 bottom-0 end-0 rounded m-1\">\r\n                  <p class=\"card-text\">{{ item.category }}</p>\r\n                </div>\r\n                <img :src=\"item.imageUrl\" :alt=\"item.title\"\r\n                  class=\"card-img-top d-block align-middle w-100  w-auto mx-auto\">\r\n              </div>\r\n              <div class=\"card-body text-dark\">\r\n                <div>\r\n                  <h3 class=\"row overflow-hidden\">\r\n                    <div class=\"card-title col-10 overflow-hidden\">\r\n                      {{ item.title }}\r\n                    </div>\r\n                    <div class=\"mw-25 text-end col-2 add-favorite\">\r\n                      <a href=\"#\" @click.stop.prevent=\"removeFavorite(item)\">\r\n                        <i class=\"bi bi-heart text-danger\"\r\n                        v-if=\"idList.every((id) => item.id !== id)\"></i>\r\n                        <i class=\"bi bi-heart-fill text-danger\"\r\n                        v-else></i>{{ null }}\r\n                      </a>\r\n                    </div>\r\n                  </h3>\r\n                </div>\r\n                <p class=\"card-text card-price\">\r\n                  <span class=\"text-decoration-line-through fs-6\"\r\n                  v-if=\"item.origin_price !== item.price\">\r\n                    NT${{$filters.currency(item.origin_price) }}\r\n                  </span>\r\n                  <span class=\"fs-5\"> NT${{$filters.currency(item.price)}}</span>\r\n                </p>\r\n              </div>\r\n            </a>\r\n            <div class=\"card-footer\">\r\n              <button type=\"button\" class=\"btn button-light-color w-100\"\r\n                @click.prevent=\"addCart(item.id)\">\r\n                <div class=\"spinner-border text-light spinner-border-sm\" role=\"status\"\r\n                v-if=\"this.status.loadingItem ===item.id\">\r\n                  <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n                <i class=\"bi bi-cart-plus\" v-else></i>加入購物車\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n<script>\r\nimport cartMixin from '@/mixins/GetCart'\r\nimport favoriteMixin from '@/mixins/GetFavorite'\r\n\r\nexport default {\r\n  inject: ['emitter'],\r\n  mixins: [cartMixin, favoriteMixin],\r\n  data () {\r\n    return {\r\n      favoriteList: [],\r\n      status: {\r\n        loadingItem: ''\r\n      },\r\n      isLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    getFavoriteProducts () {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.$http.get(api)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.isLoading = false\r\n            const productList = res.data.products\r\n            const category = []\r\n            this.favoriteList = []\r\n            productList.forEach((item) => {\r\n              category.push(item.category)\r\n              if (this.idList.some((id) => item.id === id)) {\r\n                this.favoriteList.push(item)\r\n              }\r\n            })\r\n          }\r\n        })\r\n    },\r\n    addCart (id) {\r\n      this.status.loadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1\r\n      }\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http.post(api, { data: cart })\r\n        .then((res) => {\r\n          this.status.loadingItem = ''\r\n          this.getCarts()\r\n          this.emitter.emit('push-message', {\r\n            style: 'success',\r\n            title: '已加入購物車'\r\n          })\r\n        })\r\n    },\r\n    removeFavorite (item) {\r\n      this.idList.indexOf(item.id)\r\n      this.idList.splice(this.idList.indexOf(item.id), 1)\r\n      localStorage.setItem('favoriteItem', JSON.stringify(this.idList))\r\n      this.getFavoriteProducts()\r\n      this.emitter.emit('push-message', {\r\n        style: 'danger',\r\n        title: '已取消收藏'\r\n      })\r\n    },\r\n    getProduct (id) {\r\n      this.$router.push(`/products/${id}`)\r\n    }\r\n  },\r\n  created () {\r\n    this.getFavoriteProducts()\r\n    this.getFavorite()\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.noFavoriteList-title{\r\n  font-weight: bold;\r\n  color: brown;\r\n}\r\n.card{\r\n  max-width: 350px\r\n}\r\n.card a{\r\n  text-decoration: none;\r\n}\r\n.card-pic img{\r\n  height: 350px;\r\n  object-fit: contain;\r\n  transform:scale(1,1);\r\n  transition: all 1s;\r\n}\r\n.card-pic img:hover{\r\n  transform:scale(1.2,1.2);\r\n}\r\n.add-favorite{\r\n  font-size: 30px;\r\n  transition: all 0.5s;\r\n}\r\n.add-favorite:hover{\r\n  transform:scale(1.2,1.2);\r\n}\r\n.card-price{\r\n  color: black;\r\n  font-weight: bold;\r\n}\r\n.button-light-color{\r\n    background-color: #f8a0a0;\r\n    color: black;\r\n    font-weight:bold;\r\n}\r\n.button-light-color:hover{\r\n  background-color: #f1b8b8;\r\n}\r\n</style>\r\n","import { render } from \"./FavoriteView.vue?vue&type=template&id=4dd372a8\"\nimport script from \"./FavoriteView.vue?vue&type=script&lang=js\"\nexport * from \"./FavoriteView.vue?vue&type=script&lang=js\"\n\nimport \"./FavoriteView.vue?vue&type=style&index=0&id=4dd372a8&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["inject","methods","getCarts","this","isLoading","api","$http","get","then","res","data","success","cartLength","carts","length","emitter","emit","getFavorite","localStorage","getItem","tempList","idList","JSON","parse","favoriteLength","class","_createElementVNode","role","_hoisted_24","_createVNode","_component_Loading","active","$data","favoriteList","_createElementBlock","_hoisted_1","_hoisted_2","type","onClick","_cache","_withModifiers","$event","_ctx","$router","push","_hoisted_3","_hoisted_4","_Fragment","_renderList","item","key","id","_hoisted_5","href","$options","getProduct","_hoisted_7","_hoisted_8","_hoisted_9","_toDisplayString","category","src","imageUrl","alt","title","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","removeFavorite","every","_hoisted_16","_hoisted_17","_hoisted_18","origin_price","price","_hoisted_19","$filters","currency","_hoisted_20","_hoisted_21","addCart","status","loadingItem","_hoisted_23","_hoisted_25","_hoisted_26","mixins","cartMixin","favoriteMixin","getFavoriteProducts","productList","products","forEach","some","cart","product_id","qty","post","style","indexOf","splice","setItem","stringify","created","__exports__","render"],"sourceRoot":""}