"use strict";(self["webpackChunkwork"]=self["webpackChunkwork"]||[]).push([[600],{5946:function(t,s){s.Z={inject:["emitter"],methods:{getCarts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/zyt-api/cart";this.$http.get(t).then((t=>{t.data.success&&(this.isLoading=!1,this.cartLength=t.data.data.carts.length,this.emitter.emit("push-CartNotice",{data:this.cartLength}))}))}}}},7600:function(t,s,e){e.r(s),e.d(s,{default:function(){return O}});var a=e(3396),i=e(9242),c=e(7139);const l=(0,a._)("section",{class:"mt-3"},[(0,a._)("div",{class:"container"},[(0,a._)("div",{class:"row justify-content-center align-items-center position-relative mt-5"},[(0,a._)("div",{class:"col-10"},[(0,a._)("div",{class:"progress mx-3",style:{height:"5px"}},[(0,a._)("div",{class:"progress-bar bg-info",role:"progressbar",style:{width:"0%"},"aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"})])]),(0,a._)("div",{class:"col-10 d-flex justify-content-between position-absolute top-0 translate-middle-y mt-3"},[(0,a._)("div",{class:"text-center"},[(0,a._)("span",{class:"badge bg-brown rounded-circle p-2",style:{width:"2rem",height:"2rem"}},[(0,a._)("i",{class:"bi bi-basket"})]),(0,a._)("p",{class:"mb-0"},"購物車")]),(0,a._)("div",{class:"text-center"},[(0,a._)("span",{class:"badge bg-secondary rounded-circle p-2",style:{width:"2rem",height:"2rem"}},[(0,a._)("i",{class:"bi bi-clipboard-check-fill"})]),(0,a._)("p",{class:"mb-0"},"填寫資料")]),(0,a._)("div",{class:"text-center"},[(0,a._)("span",{class:"badge bg-secondary rounded-circle p-2",style:{width:"2rem",height:"2rem"}},[(0,a._)("i",{class:"bi bi-credit-card-fill"})]),(0,a._)("p",{class:"mb-0"},"付款確認")])])])])],-1),o={key:0,class:"my-7"},n={class:"container"},r={class:"border border-2 rounded-1 px-2 py-5 null-box"},d=(0,a._)("h2",{class:"null-title"},"購物清單目前尚無選購商品哦！",-1),p={key:1,class:"my-7"},h={class:"container"},u={class:"border border-2 p-3"},_={class:"row row-cols-1 g-5 mx-0 justify-content-center"},b={class:"col-12 col-lg-8 py-3 px-0 table-responsive"},g=(0,a._)("div",{class:"px-2 text-brown"},[(0,a._)("h2",{class:"fs-3"},[(0,a._)("i",{class:"bi bi-c-circle"}),(0,a.Uk)("購物清單")])],-1),m={class:"table align-middle mt-3"},y=(0,a._)("thead",{class:"table-beige text-brown text-nowrap"},[(0,a._)("tr",null,[(0,a._)("th",{style:{width:"50px"}}),(0,a._)("th",{class:"ps-3",style:{width:"75px"}},"商品"),(0,a._)("th",{style:{width:"200px"}}),(0,a._)("th",{class:"text-end",style:{width:"100px"}},"單價"),(0,a._)("th",{class:"text-end",style:{width:"100px"}},"數量"),(0,a._)("th",{class:"text-end",style:{width:"120px"}},"小計")])],-1),x=["onClick"],w=(0,a._)("i",{class:"bi bi-trash-fill"},null,-1),v=[w],f=["src"],C={class:"text-end"},k=["onUpdate:modelValue","onChange"],$={class:"text-end"},L={class:"col-12 col-lg-8 p-0 d-flex flex-column"},z=(0,a._)("div",{class:"px-1 text-brown"},[(0,a._)("h2",{class:"fs-3"},[(0,a._)("i",{class:"bi bi-c-circle"}),(0,a.Uk)("購物車總計")])],-1),N={class:"col-12 col-md-6 ms-auto"},U={class:"input-group mb-3"},T={class:"mt-1 w-100"},j={class:"text-brown"},D={class:"text-end py-2",colspan:"3"},q=(0,a._)("td",{class:"text-end py-2",colspan:"2"},"商品金額",-1),Q={class:"text-end w-50"},V=(0,a._)("td",{class:"text-end py-2",colspan:"2"},"運費",-1),Z={class:"text-end w-50"},H={class:"text-success"},W=(0,a._)("td",{class:"text-end py-2",colspan:"2"},"優惠折扣",-1),Y={class:"text-end w-50"},K={class:"border-top border-dark"},M=(0,a._)("td",{class:"text-end py-2",colspan:"2"},"總計金額",-1),A={class:"text-end w-50"},B={class:"mt-4 col-12 col-md-2 mx-auto"};function E(t,s,e,w,E,F){const G=(0,a.up)("Loading"),I=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(G,{active:E.isLoading},null,8,["active"]),l,E.cartQty?((0,a.wg)(),(0,a.iD)("section",p,[(0,a._)("div",h,[(0,a._)("div",u,[(0,a._)("div",_,[(0,a._)("div",b,[g,(0,a._)("table",m,[y,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(E.carts.carts,(s=>((0,a.wg)(),(0,a.iD)("tbody",{class:"text-nowrap text-brown",key:s.id},[(0,a._)("tr",null,[(0,a._)("td",null,[(0,a._)("button",{type:"button",class:"btn btn btn-outline-danger btn-sm",onClick:(0,i.iM)((t=>F.delCart(s)),["prevent"])},v,8,x)]),(0,a._)("td",null,[(0,a._)("img",{src:s.product.imageUrl,alt:"item.product.title",style:{width:"100px",height:"75px","background-size":"cover","background-position":"center"}},null,8,f)]),(0,a._)("td",null,(0,c.zw)(s.product.title),1),(0,a._)("td",C," NT$ "+(0,c.zw)(t.$filters.currency(s.product.price)),1),(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"number",class:"form-control form-control-sm ms-auto","onUpdate:modelValue":t=>s.qty=t,min:"1",max:"15",onChange:t=>F.updataCart(s),style:{width:"60px"}},null,40,k),[[i.nr,s.qty,void 0,{number:!0}]])]),(0,a._)("td",$," NT$ "+(0,c.zw)(t.$filters.currency(s.total)),1)])])))),128))])]),(0,a._)("div",L,[z,(0,a._)("div",N,[(0,a._)("div",U,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control bg-beige text-brown border-1 border-dark",placeholder:"請輸入優惠碼","aria-describedby":"coupon-code","onUpdate:modelValue":s[0]||(s[0]=t=>E.couponCode=t)},null,512),[[i.nr,E.couponCode]]),(0,a._)("button",{class:"btn btn-outline-dark",type:"button",id:"coupon-code",onClick:s[1]||(s[1]=t=>F.addCouponCode())},"套用優惠卷")])]),(0,a._)("table",T,[(0,a._)("tbody",j,[(0,a._)("tr",null,[(0,a._)("td",D,"共 "+(0,c.zw)(E.cartQty)+" 筆商品",1)]),(0,a._)("tr",null,[q,(0,a._)("td",Q,"NT$ "+(0,c.zw)(t.$filters.currency(E.carts.total)),1)]),(0,a._)("tr",null,[V,(0,a._)("td",Z,"NT$ "+(0,c.zw)(t.$filters.currency(E.freight)),1)]),(0,a._)("tr",H,[W,(0,a._)("td",Y,"- NT$ "+(0,c.zw)(t.$filters.currency(E.carts.total-E.carts.final_total)),1)]),(0,a._)("tr",K,[M,(0,a._)("td",A,"NT$ "+(0,c.zw)(t.$filters.currency(E.carts.final_total+E.freight)),1)])])]),(0,a._)("div",B,[(0,a._)("button",{type:"button",class:"btn btn-primary rounded-3 w-100",onClick:s[2]||(s[2]=(...t)=>F.toCheckinfo&&F.toCheckinfo(...t))},"填寫資料")])])])])])])):((0,a.wg)(),(0,a.iD)("section",o,[(0,a._)("div",n,[(0,a._)("div",r,[d,(0,a.Wm)(I,{to:"/products",class:"null-btn"},{default:(0,a.w5)((()=>[(0,a.Uk)("來去逛逛吧！")])),_:1})])])]))],64)}e(7658);var F=e(5946),G={inject:["emitter"],mixins:[F.Z],data(){return{carts:{},cartQty:0,couponCode:"",freight:60,isLoading:!1}},methods:{getCart(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/zyt-api/cart";this.$http.get(t).then((t=>{this.isLoading=!1,t.data.success?(this.carts=t.data.data,this.cartQty=t.data.data.carts.length):this.emitter.emit("push-message",{style:"danger",title:t.response.data.message})}))},updataCart(t){this.isLoading=!0;const s=`https://vue3-course-api.hexschool.io/api/zyt-api/cart/${t.id}`,e={product_id:t.id,qty:t.qty};this.$http.put(s,{data:e}).then((t=>{this.isLoading=!1,this.getCart()})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:t.response.data.message})}))},delCart(t){this.isLoading=!0;const s=`https://vue3-course-api.hexschool.io/api/zyt-api/cart/${t.id}`;this.$http.delete(s).then((t=>{this.isLoading=!1,this.getCart(),this.getCarts()}))},addCouponCode(){this.isLoading=!0;const t={code:this.couponCode},s="https://vue3-course-api.hexschool.io/api/zyt-api/coupon";this.$http.post(s,{data:t}).then((t=>{this.couponCode="",t.data.success?(this.isLoading=!1,this.emitter.emit("push-message",{style:"success",title:"套用優惠券成功"}),this.getCart()):(this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:"套用優惠券失敗",content:t.data.message}))}))},toCheckinfo(){this.$router.push("/userCheckinfo")}},created(){this.getCart()}},I=e(89);const J=(0,I.Z)(G,[["render",E]]);var O=J}}]);
//# sourceMappingURL=600.374515be.js.map