{"version":3,"file":"js/677.2da4a746.js","mappings":"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","sources":["webpack://work/./src/mixins/GetCart.js","webpack://work/./src/mixins/GetFavorite.js","webpack://work/./src/views/Front/ProductsView.vue","webpack://work/./src/views/Front/ProductsView.vue?c50b"],"sourcesContent":["export default {\r\n  inject: ['emitter'],\r\n  methods: {\r\n    getCarts () {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http.get(api)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.isLoading = false\r\n            this.cartLength = res.data.data.carts.length\r\n            this.emitter.emit('push-CartNotice', {\r\n              data: this.cartLength\r\n            })\r\n          }\r\n        })\r\n    }\r\n  }\r\n}\r\n","export default {\r\n  methods: {\r\n    getFavorite () {\r\n      if (localStorage.getItem('favoriteItem')) {\r\n        const tempList = localStorage.getItem('favoriteItem')\r\n        this.idList = JSON.parse(tempList)\r\n        this.favoriteLength = this.idList.length\r\n      } else {\r\n        this.idList = []\r\n        this.favoriteLength = 0\r\n      }\r\n      this.emitter.emit('push-FavNotice', {\r\n        data: this.favoriteLength\r\n      })\r\n    }\r\n  }\r\n}\r\n","<template>\r\n <Loading :active=\"isLoading\"></Loading>\r\n <div class=\"container mt-5\">\r\n  <div class=\"row g-3\">\r\n    <div class=\"side-bar col-lg-2\">\r\n      <div class=\"text-center d-flex flex-md-column justify-content-center\">\r\n        <button v-for=\"item in categoryList\" :key=\"item.value\"\r\n            class=\"btn btn-outline-success me-1 me-md-0 mb-md-1 py-md-2 text-nowrap\" type=\"button\"\r\n            @click=\"filterProducts(item.value)\"\r\n            :class=\"{ active: item.value === this.currentCategory }\">\r\n              {{ item.value }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-lg-10 row ms-0\">\r\n      <div class=\"col-sm-12 col-md-6 col-lg-4\"\r\n      v-for=\"item in tempProduct\" :key=\"item.id\">\r\n        <div class=\"card mt-1 mb-2 mx-auto\">\r\n          <a href=\"#\" @click.prevent=\"getProduct(item.id)\">\r\n            <div class=\"overflow-hidden text-light position-relative border-bottom card-pic\">\r\n              <div class=\"position-absolute bg-secondary px-2 bottom-0 end-0 rounded m-1\">\r\n                <p class=\"card-text\">{{item.category}}</p>\r\n              </div>\r\n              <img :src=\"item.imageUrl\" :alt=\"item.title\"\r\n              class=\"card-img-top d-block align-middle w-100  w-auto mx-auto\">\r\n            </div>\r\n            <div class=\"card-body text-dark\">\r\n              <div>\r\n                <h3 class=\"row overflow-hidden\">\r\n                  <div class=\"card-title col-10 overflow-hidden\">\r\n                    {{item.title}}\r\n                  </div>\r\n                  <div class=\"mw-25 text-end col-2 add-favorite\">\r\n                    <a href=\"#\"  @click.stop.prevent=\"updateFavorite(item)\">\r\n                      <i class=\"bi bi-heart text-danger\" title=\"加入收藏\"\r\n                      v-if=\"idList.every((id) => item.id !== id)\"></i>\r\n                      <i class=\"bi bi-heart-fill text-danger\" title=\"移除收藏\" v-else></i>{{ null }}\r\n                    </a>\r\n                  </div>\r\n                </h3>\r\n              </div>\r\n              <p class=\"card-text card-price\">\r\n                  <span class=\"text-decoration-line-through fs-6\"\r\n                  v-if=\"item.origin_price !== item.price\">\r\n                    NT${{$filters.currency(item.origin_price) }}\r\n                  </span>\r\n                  <span class=\"fs-5\"> NT${{$filters.currency(item.price)}}</span>\r\n              </p>\r\n            </div>\r\n          </a>\r\n          <div class=\"card-footer\">\r\n            <button type=\"button\" class=\"btn button-light-color w-100\"\r\n              @click.prevent=\"addCart(item.id)\">\r\n              <div class=\"spinner-border text-light spinner-border-sm\" role=\"status\"\r\n              v-if=\"this.status.loadingItem ===item.id\">\r\n                <span class=\"visually-hidden\">Loading...</span>\r\n              </div>\r\n              <i class=\"bi bi-cart-plus\" v-else></i>加入購物車\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n </div>\r\n</template>\r\n\r\n<script>\r\nimport cartMixin from '@/mixins/GetCart'\r\nimport favoriteMixin from '@/mixins/GetFavorite'\r\n\r\nexport default {\r\n  inject: ['emitter'],\r\n  mixins: [cartMixin, favoriteMixin],\r\n  data () {\r\n    return {\r\n      idList: [],\r\n      products: [],\r\n      tempProduct: {},\r\n      isLoading: false,\r\n      currentCategory: '全部',\r\n      status: {\r\n        loadingItem: ''\r\n      },\r\n      categoryList: [\r\n        { value: '全部' },\r\n        { value: '桌花' },\r\n        { value: '永生花束' },\r\n        { value: '花藝燈' }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    getProducts () {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.$http.get(api)\r\n        .then((res) => {\r\n          this.isLoading = false\r\n          if (res.data.success) {\r\n            this.products = res.data.products\r\n            this.tempProduct = this.products\r\n          }\r\n        })\r\n    },\r\n    getProduct (id) {\r\n      this.$router.push(`/products/${id}`)\r\n    },\r\n    updateFavorite (item) {\r\n      if (this.idList.every((id) => item.id !== id)) {\r\n        this.idList.push(item.id)\r\n        localStorage.setItem('favoriteItem', JSON.stringify(this.idList))\r\n        this.emitter.emit('push-message', {\r\n          style: 'success',\r\n          title: '已新增至收藏'\r\n        })\r\n      } else {\r\n        this.idList.indexOf(item.id)\r\n        this.idList.splice(this.idList.indexOf(item.id), 1)\r\n        localStorage.setItem('favoriteItem', JSON.stringify(this.idList))\r\n        this.emitter.emit('push-message', {\r\n          style: 'danger',\r\n          title: '已取消收藏'\r\n        })\r\n      }\r\n      this.getFavorite()\r\n    },\r\n    addCart (id) {\r\n      this.status.loadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1\r\n      }\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http.post(api, { data: cart })\r\n        .then((res) => {\r\n          this.status.loadingItem = ''\r\n          this.getCarts()\r\n          this.emitter.emit('push-message', {\r\n            style: 'success',\r\n            title: '已加入購物車'\r\n          })\r\n        })\r\n    },\r\n    filterProducts (value) {\r\n      this.isLoading = true\r\n      this.currentCategory = value\r\n      setTimeout(() => {\r\n        if (value === '全部') {\r\n          this.tempProduct = this.products\r\n          this.isLoading = false\r\n        } else {\r\n          this.tempProduct = this.products.filter((item) => {\r\n            return item.category === value\r\n          })\r\n          this.isLoading = false\r\n        }\r\n      }, 1000)\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n    this.getFavorite()\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.card{\r\n  max-width: 350px\r\n}\r\n.card a{\r\n  text-decoration: none;\r\n}\r\n.card-pic img{\r\n  height: 350px;\r\n  object-fit: contain;\r\n  transform:scale(1,1);\r\n  transition: all 1s;\r\n}\r\n.card-pic img:hover{\r\n  transform:scale(1.2,1.2);\r\n}\r\n.add-favorite{\r\n  font-size: 30px;\r\n  transition: all 0.5s;\r\n}\r\n.add-favorite:hover{\r\n  transform:scale(1.2,1.2);\r\n}\r\n.card-price{\r\n  color: black;\r\n  font-weight: bold;\r\n}\r\n.button-light-color{\r\n    background-color: #f8a0a0;\r\n    color: black;\r\n    font-weight:bold;\r\n}\r\n.button-light-color:hover{\r\n  background-color: #f1b8b8;\r\n}\r\n</style>\r\n","import { render } from \"./ProductsView.vue?vue&type=template&id=0093acd8\"\nimport script from \"./ProductsView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsView.vue?vue&type=script&lang=js\"\n\nimport \"./ProductsView.vue?vue&type=style&index=0&id=0093acd8&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["inject","methods","getCarts","this","isLoading","api","$http","get","then","res","data","success","cartLength","carts","length","emitter","emit","getFavorite","localStorage","getItem","tempList","idList","JSON","parse","favoriteLength","class","title","role","_createElementVNode","_hoisted_26","_createVNode","_component_Loading","active","$data","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createElementBlock","_Fragment","_renderList","categoryList","item","key","value","_normalizeClass","currentCategory","type","onClick","$event","$options","filterProducts","_hoisted_5","_hoisted_6","tempProduct","id","_hoisted_7","href","_withModifiers","getProduct","_hoisted_9","_hoisted_10","_hoisted_11","_toDisplayString","category","src","imageUrl","alt","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","updateFavorite","every","_hoisted_18","_hoisted_19","_hoisted_20","origin_price","price","_hoisted_21","_ctx","$filters","currency","_hoisted_22","_hoisted_23","addCart","status","loadingItem","_hoisted_25","_hoisted_27","_hoisted_28","mixins","cartMixin","favoriteMixin","products","getProducts","$router","push","setItem","stringify","style","indexOf","splice","cart","product_id","qty","post","setTimeout","filter","created","__exports__","render"],"sourceRoot":""}